<Page x:Class="TicketManagementSystem.Client.Views.LayoutPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:TicketManagementSystem.Client.ViewModels"
      xmlns:controls="clr-namespace:TicketManagementSystem.Client.Shared.Controls"
      Title="Main Layout">

    <Grid Background="{StaticResource BackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Header -->
            <RowDefinition Height="*"/>    <!-- Main Content -->
            <RowDefinition Height="Auto"/> <!-- Bottom Navigation -->
            <RowDefinition Height="Auto"/> <!-- Footer -->
        </Grid.RowDefinitions>
        
        <!-- Main Content -->
        <Frame x:Name="ContentFrame" Grid.Row="1" NavigationUIVisibility="Hidden"/>

        <!-- Bottom Navigation -->
        <Border Grid.Row="2" 
                Padding="20,10"
                Visibility="{Binding IsLoggedIn, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <!-- Tickets -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateTicketsCommand}"
                        GroupName="NavButtons"
                        IsChecked="True">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/ticket.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>
                
                <!-- Charts -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateChartsCommand}"
                        GroupName="NavButtons">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/chart.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- Chat -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateChatCommand}"
                        GroupName="NavButtons">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/chat.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- Setting -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateSettingCommand}"
                        GroupName="NavButtons">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/settings.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- Helper -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateHelperCommand}"
                        GroupName="NavButtons">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/helper.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- Calendar -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateCalendarCommand}"
                        GroupName="NavButtons">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/calendar.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>
                
                <!-- Dashboard (Admin only) -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateDashboardCommand}"
                        GroupName="NavButtons"
                        Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVisibilityConverter}}">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/user.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- Call Videos -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateVideoCommand}"
                        GroupName="NavButtons"
                        Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVisibilityConverter}}">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/video.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- profile -->
                <RadioButton Style="{StaticResource NavRadioButtonStyle}"
                        Command="{Binding NavigateProfileCommand}"
                        GroupName="NavButtons"
                        Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVisibilityConverter}}">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="../Resources/PageLinkIcons/profile.png"
                            Width="50"
                            Height="50"
                            Margin="0,0,0,4"/>
                    </StackPanel>
                </RadioButton>

                <!-- logout -->
                <Button Command="{Binding LogoutCommand}"
                        Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVisibilityConverter}}"
                        Style="{StaticResource LogoutButtonStyle}">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Background="Transparent">
                                <Image x:Name="LogoutIcon" 
                                       Source="../Resources/PageLinkIcons/locked.png"
                                       Width="50"
                                       Height="50"
                                       Margin="0,0,0,4"
                                       RenderTransformOrigin="0.5,0.5">
                                    <Image.RenderTransform>
                                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                                    </Image.RenderTransform>
                                </Image>
                            </StackPanel>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="LogoutIcon" Property="Source" Value="../Resources/PageLinkIcons/unlocked.png"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Border>
        
        <!-- Footer -->
        <controls:Footer Grid.Row="3"/>
    </Grid>
</Page>
