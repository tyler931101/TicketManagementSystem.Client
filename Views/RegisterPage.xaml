<Page x:Class="TicketManagementSystem.Client.Views.RegisterPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:TicketManagementSystem.Client.ViewModels"
      Title="Register">

    <Page.DataContext>
        <vm:RegisterViewModel/>
    </Page.DataContext>

    <Grid Background="{StaticResource BackgroundBrush}">
        <!-- Register Form -->
        <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
            <Border Background="{StaticResource CardBrush}"
                    Padding="40"
                    Width="600"
                    VerticalAlignment="Center"
                    CornerRadius="10"
                    BorderThickness="0">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="4" Opacity="0.4"/>
                </Border.Effect>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="Create Account"
                               FontSize="28"
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,25"/>

                    <TextBlock Text="Username:" FontWeight="Bold" Margin="0,0,0,3"/>
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Margin="0,0,0,10"
                             Height="35"
                             Padding="8,6"
                             BorderThickness="1"
                             BorderBrush="#D1D5DB"
                             Background="White"
                             FontSize="14"/>

                    <TextBlock Text="Email:" FontWeight="Bold" Margin="0,5,0,3"/>
                    <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                             Margin="0,0,0,10"
                             Height="35"
                             Padding="8,6"
                             BorderThickness="1"
                             BorderBrush="#D1D5DB"
                             Background="White"
                             FontSize="14"/>

                    <TextBlock Text="Password:" FontWeight="Bold" Margin="0,5,0,3"/>
                    <PasswordBox x:Name="PasswordBox"
                                 PasswordChanged="PasswordBox_PasswordChanged"
                                 Margin="0,0,0,20"
                                 Height="35"
                                 Padding="8,6"
                                 BorderThickness="1"
                                 BorderBrush="#D1D5DB"
                                 Background="White"
                                 FontSize="14"/>

                    <Button Content="Register"
                            Command="{Binding RegisterCommand}"
                            Height="35"
                            FontSize="15"
                            FontWeight="SemiBold"
                            Margin="0,5,0,10"
                            Padding="12,0"
                            Background="{StaticResource PrimaryBrush}"
                            Foreground="White"
                            BorderThickness="0"
                            Cursor="Hand"
                            IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="4"
                                                    BorderThickness="0"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#2563EB"/>
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Opacity" Value="0.6"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Loading Indicator -->
                    <ProgressBar IsIndeterminate="True" 
                                 Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                 Margin="0,0,0,15"
                                 Height="4"
                                 Background="#E5E7EB"
                                 Foreground="{StaticResource PrimaryBrush}"/>

                    <!-- Login Link -->
                    <TextBlock HorizontalAlignment="Center"
                               TextAlignment="Center"
                               FontSize="13"
                               Foreground="{StaticResource TextBrush}"
                               Margin="0,10,0,0">
                        <Run Text="Already have an account? "/>
                        <Run Text="Login"
                             Foreground="{StaticResource PrimaryBrush}"
                             TextDecorations="Underline"
                             Cursor="Hand">
                            <Run.InputBindings>
                                <MouseBinding Gesture="LeftClick"
                                              Command="{Binding NavigateToLoginCommand}" />
                            </Run.InputBindings>
                        </Run>
                    </TextBlock>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>
